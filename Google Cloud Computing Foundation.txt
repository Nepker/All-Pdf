Google Cloud Computing Foundation:Networking & Security in Google Cloud:

Module 1:It helps to Network
ObjectivesL
1.Explore Virtual private Clouds(VPCs)
2.Examine Google's network architecture
3.Learn how to use multiple VPC networks
4.Explore options to build hybrid clouds
5.Examine load balancing options

Agenda:
1.Networking in the cloud
2.Virtual private clouds(VPC)
3.The basics of public and internal ip addresses
4.The Google cloud network
5.Router and firewall rules in cloud
6.Multiple VPC network
7.Lab:Multiple VPC networks
8.Lab:VPC networks-controlling access
9.Building hybrid clouds
10.Load balancing options
11.Lab:HTTP Load balancer with Google cloud armor
12.Quiz
13.Summary


Networking in the cloud:
-Computers communicate with each other on a network.The computers in a single location,like an office are connected on a local area network.Multiple locations can have their LANs connected to a wide area network, or WAN.Most networks today are connected to the internet, which enables millions of personal computers, servers, smartphones, and other devices to communicate, provide, and consume IT services.Since around 2004, Google has been a leader in building fast, powerful, high-quality cloud infrastructures.
Google’s high-quality private network connects regional locations to more than 100 global network points of presence close to users.Google Cloud also uses state-of-the-art software-defined networking and distributed systems technologies to host and deliver services around the world.When every millisecond of latency counts, Google ensures that content is delivered with the highest throughput.https://cloud.google.com/about/locations/ Here’s an example network diagram for an application that bridges an organization's physical data center and Google Cloud.The web client, or end user, performs a Domain Name System lookup, which is served by Cloud DNS.Content Delivery Networks, or CDNs, are locations within the Google network that are used to cache content closer to the users to improve application performance.The user requests a page.If the CDN option was selected when Cloud Load Balancing was configured, then the request will go to the closest.CDN location, which will serve that page without getting it from the servers if the CDN has the page stored.For a page that the CDN doesn’t have, it will call Cloud LoadBalancing.Cloud Load Balancing will pick an appropriate frontend server to serve the request, and return the page to the user.In Google Cloud, a "network" is an isolated global resource holding network configuration.Instances are deployed in regional subnetworks, however the policy (firewall, routing, and so on), and access through VPN, are configured at the global network level.Depending on the content of the page, the frontend Compute Engine server may have to talk to a Compute Engine backend server, which is regularly updated with data feeds from other sites. The subnetworks are configured so that the frontend subnet cannot talk directly to the data center or colocation facility. 

Virtual Private Cloud:
-A virtual private cloud or VPC,is a secure,individual private cloud-computing model hosted within private cloud.
-VPC networks connects Google cloud resources to each other and to the internet like segmenting networks,using firewall rules to restrict access to instance and creating static routes to forward traffic to specific destination.
-Google VPC networks are global and can have subnets in any Google cloud region worldwide.
-The size of a subnet can be increased by expanding the range of ip address allocated to it and doing so doesn't affect the already configured virtual machines.For example:Let's take a VPC with one network that currently has one subnet defined in Google cloud's us-east1 region.If the VPC has two compute engine VMs attached to it,it means they're neighbors on the same subnets,although they are in different zones!.
-The capability can be used to build solutions that are resilient to disruptions but retain a simple network layout.Google cloud offers two types of VPC network,determined by their subnet creation mode:auto subnet mode and custom subnet mode.When an auto subnet mode VPC network created,one subnet from each region is automatically created within it.As new Google cloud region become available,new subnets in those regions are automatically added to auto mode VPC network.The automatically created subnets use a set of predefined IP ranges and default firewall rule can be applied,In addition to thw automatically created subnets,you can add more subnets manually to auto mode VPC networks,in the regions you choose by using IP range outside a set of predefines IP ranges.When you expand the IP range in auto mode VPC network,the broadest prefix you can use is /16.Any prefix broader than /16 would conflict with the primary IP ranges of other automatically created subnets.Due to it's limited flexibility,an auto mode VPC network is better suited to isolated use cases,such as aproof of concepts and testing.A custom mode network doesnot automatically create subnets.This type of network provides you with complete control over it's subnets and IP ranges.You decide which subnets to create in regions you choose and using IP ranges you specify.These IP ranges cannot overlap between subnets of the same network.These IP ranges cannot overlap between subnets of the same network.Custom mode VPC networks are therefore a lot more flexible and are better suited to production environments.While you can switvh a network from auto mode to custom mode,this conversion is one way,Custom mode VPC networks cannot be changed to auto mode VPC networks.

The basics of Public and Internal IP addresses:
-A Virtual Private cloud(VPC) is composed of subnetworks or subnets and each subnets must be configured with a private IP CIDR address.CIDR stands for classless inter-domain Routing.The CIDR range will be determine whate internal ip address will be used by virtual machines in the subnets.Internal IP addresses are only used for communication within the VPC and cannot be routed to the internet.Each octet in an IP address is represented by 8 binary bits.So typical IPV4 address is 32 bits long. The number at the end of the range determines how many bits will be static or frozen.This number determines how many IP addresses are available with a CIDR address.The CIDR range determines how many IP addresses are available. A /16 range will provide 65,536 are available IP addresses.Every time you add "1" to the last number,the number of available IP addresses is cut in half.So,what's the difference between public and internal IP addresses?Public or external IP addresses can be ephemeral or reserved.They are assigned from a pool of IP addresses associated with the region.If you allocate a reserved IP address but don'y attach it to a virtual machine,you will be billed for the IP address.Virtual machines are unaware if their publiv IP address,which means that if you look at the operating system network configuration,the virtual machine will only display the internal IP address. Private or internal IP addresses,however are allocated to VMs by a Dynamic Host Configuration Protocol(DHCP) service.The lease for IPs is renewed every 24 hours,The name of virtual machine is the hostname will be associated with the internal IP address through a network-scoped DNS service.

The Google Cloud Network:

Google network architecture is a high level Google cloud network all over the world.Google cloud consit of regions,represented by the markers in blue together  with proposed future regions in white.A region is a specific geographical location where you can run your resources.The number of each region represents the zone within that region.Points of presence or POPs are represented by the dark gray dots.The PoPs are where the google network is connected to the rest of the internet. By operating an extensive global network of interconnection points.Google cloud can bring it's traffic closer to it;s peer which reduces costs and provides user with a better experience. Google's global private network is represented by the blur lines.The network connects regions and Pops and is composed of hundreds og thousands of miles of fiber optic cable and several submarine cable investments.The cables that have a year next to them are our latest investments.The last component that makes up the architecture is Google's services themselves. https://cloud.google.com/about/locations/ Here are five of Google Cloud networking products available to users. Google Cloud VPC is comprehensive set of networking capabilities and infrastructure that's managed by Google. With VPCs you can connect your Google Cloud resources in a VPC and isolate them from each other for purpose of security,compliance and development versus production. Cloud load balancing provides high performance,scalable load balancing for Google Cloud ensure consistent performance for users. Cloud CDN is a content delivery network that serves content to end users with high availability and high performance,usually by storing file close to the user. With cloud CDN,Google's global network provides low-latemcy,low-cost content delivery. Cloud interconnect lets you connect your own infrastructure to Google's network edge with the enterprise-grade connections. Google partner network-service providers offers connections and can offer higher service levels than standard internet connections. CLoud DNS translate requests for domain names into IP addresses. Google provides the infrastructure to publish specific domain names in high-volumes DNS services suitable for production applications.

Google Cloud's Primary networking Products:
1.Google Cloud VPC--Compherensive networking capabilities and infrastructure
2.Cloud Load Balancing--High performance,scalable load balancing
3.Cloud CDN--Low latency content delivery
4.Cloud Interconnect--Fast,High availability interconnect
5.CLoud DNS--High availability global DNS network

Routers and Firewakk rules in cloud::
-Much loke physical networks,VPCs have routing tables.A routing table of router locations and their addresses, stored in the memory if a router or a network host. it lists the router to particular network destinations and sometimes, a metric value(number of "hops" needed to get to that address) which aids the router in choosing the most efficient router, VPC routing tables are built-in so you don't have to provision or manage a router. They are used to forward traffic from one instance to another within the same network,across subnetworks or even between Google Cloud zones, without requiring  an external IP address.Another thing you don't have to provision or manage for Google cloud is a firewall.
-VPCs provide a global distributed firewall,which can be controlled to restrict access to instances through both incoming and outgoing traffic.It's convenient to define firewall rules through metadata tags on compute Engine Instances. For example:You can tag all your web servers with "WEB" and write a firewall rule that says that traffic on port 80 or 443 is allowed into all VMs with the "WEB" tag,no matter what their IP address happens to be in cloud.

Multiple VPCs Networks:
-VPCs belong to Google Cloud Projects but what if your company has several Google Cloud projects and the VPCs need to talk to each other? With VPC peering,a relationship between two VPCs can be established to exchange  traffic.It allows RFC 1918 connectivity across two VPC networks,regardless of whether they belong to the same project or organization. Now,remember that each VPC network will have firewall rules that define what traffic is allowed or denied between the networks. VPC peering is a decentralized or distributed approach to multi-projects networking because each VPC network can remain under the control of seprate administrator groups and maintain it's own global firewall and routing tables. Historically,such projects would consider external IP addresses or VPNs to facilitate private communication between VPC networks. However,VPC peering doesnot incur the network latency,security and the cost disadvantages of using external IP addresses or VPNs. Alternatively,to use the full power of identity and Access Management(IAM) to control who and what in one project can interact with a VPC in another then you can configure shared VPC. Shared VPC allows an organization to connect resources from multiple projects to a common VPC network. This allows the resources to communicate with each other securely and efficiently by using internal IPs from that network. When you use shared VPC,you designate a project as a host project and attach one or more other service projects to it.The overall VPC network is called Shared VPC network.

Lab: Multiple VPC networks
1.Create custom mode VPC network with firewall rules
2..Use compute Engine to create virtual machine instances.
3.Explore the connectivity for virtual machine instances across VPC networks.
4.Create a virtual machine instance with multiple network interfaces.


Lab:VPC Networs-Controlling access
1. Create an NGINX web server
2. Create tagged firewall rules
3. Create a service account with IAM roles
4. Explore permissions for the Network Admin and Security Admin roles.

Building Hybrid Cloud:
-Many Google CLoud customers wants to connect their Google Virtual Private CLouds  to other networks in their system,such as in-premises networks or networks in other clouds. There are several effective ways to achieve this. One option is to start with a virtual private network connection over the internet and use the IPsec VPN protocol to create a tunnel connection. To make the connection dynamic, a Google Cloud feature called Cloud Router can be used. Cloud Router lets other networks and Google VPC exchange route information over the VPN by using the Border Gateway Protocol. With this method, if you add a new subnet to your Google VPC,your on-permises network will automatically get routes to it.But using the internet to connect network isn't always the best option for everyone,either because of security concerns or because of bandwith reliability. A second optiom is to consider 'peering' with Google by using Direct peering. Peering means putting a router in the same public data center as a Google point of presence and using it to exchange traffic between networks. Google has more than 100 points of presence(PoPs) around the world. Customers who aren't already in a point of presence can contract with a partner in the carrier peering program to be connected. Carrier peering gives you direct access from your on-premises network through a service provider's network to Google. Workspae and to Google Cloud products that can be exposed through one or more public IP addresses. One downside of peering though is that it isn;t covered by a Google service level agreement. If getting the highest uptimes for interconnection is important,then using dedicated interconnect would be a good solution. This option allows for one or more direct,private connections to Google. If these connections have topologies that meet Google's specfications,they can be covered by up to a 99.99% SLA(service level agreement) also,these connections can be backed up by a VBPN for greater reliability. And the final option we'll explore is Partner interconnect which provides connectivity between an on-premises network and a VPC network through a supported service provider. A partner interconnect connection is useful if a data center is in physical location that can;t reach a dedicated interconnect colocation facility, or if the data needs doesn't warrent an entire 10 Gbps connection. Depending on availability needs,Partner interconnect can be configured to support mission-critical services or applications that can tolerate some downtime. As with dedicated interconnect,if these connections have topologies that meet Google's specifications they can be covered by up to a 99.99% SLA but note that Google is not responsible for any aspects of partner interconnect provided by the third part service provider nor any issues outside of Google's network.




